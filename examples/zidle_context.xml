
<zidle_context>
  <game_rules>
    - One NFT per wallet required
    - Balance mining between Stone and Wood
    - Token IDs are u256, but use CHECK_NFT token_id_low for all actions
    - Each resource type has different levels with specific requirements and rewards
  </game_rules>

  <game_mechanics>
    <level_system>
      <constants>
        <max_level>99</max_level>
      </constants>
      <xp_table>
        <level value="0" required_xp="0" />
        <level value="1" required_xp="110" />
        <level value="2" required_xp="140" />
        <level value="3" required_xp="190" />
        <level value="4" required_xp="260" />
        <level value="5" required_xp="350" />
        <level value="6" required_xp="460" />
        <level value="7" required_xp="590" />
        <level value="8" required_xp="740" />
        <level value="9" required_xp="910" />
        <level value="10" required_xp="1100" />
        <level value="11" required_xp="1310" />
        <level value="12" required_xp="1540" />
        <level value="13" required_xp="1790" />
        <level value="14" required_xp="2060" />
        <level value="15" required_xp="2350" />
        <level value="16" required_xp="2660" />
        <level value="17" required_xp="2990" />
        <level value="18" required_xp="3340" />
        <level value="19" required_xp="3710" />
        <level value="20" required_xp="4100" />
        <level value="21" required_xp="4510" />
        <level value="22" required_xp="4940" />
        <level value="23" required_xp="5390" />
        <level value="24" required_xp="5860" />
        <level value="25" required_xp="6350" />
        <level value="26" required_xp="6860" />
        <level value="27" required_xp="7390" />
        <level value="28" required_xp="7940" />
        <level value="29" required_xp="8510" />
        <level value="30" required_xp="9100" />
        <level value="31" required_xp="9710" />
        <level value="32" required_xp="10340" />
        <level value="33" required_xp="10990" />
        <level value="34" required_xp="11660" />
        <level value="35" required_xp="12350" />
        <level value="36" required_xp="13060" />
        <level value="37" required_xp="13790" />
        <level value="38" required_xp="14540" />
        <level value="39" required_xp="15310" />
        <level value="40" required_xp="16100" />
        <level value="41" required_xp="16910" />
        <level value="42" required_xp="17740" />
        <level value="43" required_xp="18590" />
        <level value="44" required_xp="19460" />
        <level value="45" required_xp="20350" />
        <level value="46" required_xp="21260" />
        <level value="47" required_xp="22190" />
        <level value="48" required_xp="23140" />
        <level value="49" required_xp="24110" />
        <level value="50" required_xp="25100" />
        <level value="51" required_xp="26110" />
        <level value="52" required_xp="27140" />
        <level value="53" required_xp="28190" />
        <level value="54" required_xp="29260" />
        <level value="55" required_xp="30350" />
        <level value="56" required_xp="31460" />
        <level value="57" required_xp="32590" />
        <level value="58" required_xp="33740" />
        <level value="59" required_xp="34910" />
        <level value="60" required_xp="36100" />
        <level value="61" required_xp="37310" />
        <level value="62" required_xp="38540" />
        <level value="63" required_xp="39790" />
        <level value="64" required_xp="41060" />
        <level value="65" required_xp="42350" />
        <level value="66" required_xp="43660" />
        <level value="67" required_xp="44990" />
        <level value="68" required_xp="46340" />
        <level value="69" required_xp="47710" />
        <level value="70" required_xp="49100" />
        <level value="71" required_xp="50510" />
        <level value="72" required_xp="51940" />
        <level value="73" required_xp="53390" />
        <level value="74" required_xp="54860" />
        <level value="75" required_xp="56350" />
        <level value="76" required_xp="57860" />
        <level value="77" required_xp="59390" />
        <level value="78" required_xp="60940" />
        <level value="79" required_xp="62510" />
        <level value="80" required_xp="64100" />
        <level value="81" required_xp="65710" />
        <level value="82" required_xp="67340" />
        <level value="83" required_xp="68990" />
        <level value="84" required_xp="70660" />
        <level value="85" required_xp="72350" />
        <level value="86" required_xp="74060" />
        <level value="87" required_xp="75790" />
        <level value="88" required_xp="77540" />
        <level value="89" required_xp="79310" />
        <level value="90" required_xp="81100" />
        <level value="91" required_xp="82910" />
        <level value="92" required_xp="84740" />
        <level value="93" required_xp="86590" />
        <level value="94" required_xp="88460" />
        <level value="95" required_xp="90350" />
        <level value="96" required_xp="92260" />
        <level value="97" required_xp="94190" />
        <level value="98" required_xp="96140" />
        <level value="99" required_xp="98110" />
      </xp_table>
      <helper>
        <level_determination>
          To find current level, look up the highest level where current_xp >= required_xp
        </level_determination>
        <next_level>
          To find XP needed for next level, subtract current_xp from next level's required_xp
        </next_level>
      </helper>
    </level_system>

    <resource_types>
      <wood_types rcs_type="1">
        <wood id="1" name="Pine" min_level="0">
          <base_time>2000</base_time>
          <base_xp>5</base_xp>
          <unit_price>1</unit_price>
        </wood>
        <wood id="2" name="Oak" min_level="15">
          <base_time>3000</base_time>
          <base_xp>10</base_xp>
          <unit_price>2</unit_price>
        </wood>
        <wood id="3" name="Maple" min_level="30">
          <base_time>4000</base_time>
          <base_xp>15</base_xp>
          <unit_price>3</unit_price>
        </wood>
        <wood id="4" name="Walnut" min_level="45">
          <base_time>5000</base_time>
          <base_xp>20</base_xp>
          <unit_price>4</unit_price>
        </wood>
        <wood id="5" name="Mahogany" min_level="60">
          <base_time>6000</base_time>
          <base_xp>25</base_xp>
          <unit_price>5</unit_price>
        </wood>
        <wood id="6" name="Ebony" min_level="75">
          <base_time>10000</base_time>
          <base_xp>30</base_xp>
          <unit_price>6</unit_price>
        </wood>
        <wood id="7" name="Eldertree" min_level="90">
          <base_time>15000</base_time>
          <base_xp>50</base_xp>
          <unit_price>10</unit_price>
        </wood>
      </wood_types>

      <food_types rcs_type="2">
        <food id="1" name="Berries" min_level="0">
          <base_time>2000</base_time>
          <base_xp>5</base_xp>
          <unit_price>1</unit_price>
        </food>
        <food id="2" name="Wheat" min_level="15">
          <base_time>3000</base_time>
          <base_xp>10</base_xp>
          <unit_price>2</unit_price>
        </food>
        <food id="3" name="Vegetables" min_level="30">
          <base_time>4000</base_time>
          <base_xp>15</base_xp>
          <unit_price>3</unit_price>
        </food>
        <food id="4" name="Fruits" min_level="45">
          <base_time>5000</base_time>
          <base_xp>20</base_xp>
          <unit_price>4</unit_price>
        </food>
        <food id="5" name="Herbs" min_level="60">
          <base_time>6000</base_time>
          <base_xp>25</base_xp>
          <unit_price>5</unit_price>
        </food>
        <food id="6" name="Mushrooms" min_level="75">
          <base_time>10000</base_time>
          <base_xp>30</base_xp>
          <unit_price>6</unit_price>
        </food>
        <food id="7" name="Ambrosia" min_level="90">
          <base_time>15000</base_time>
          <base_xp>50</base_xp>
          <unit_price>10</unit_price>
        </food>
      </food_types>

      <mineral_types rcs_type="3">
        <mineral id="1" name="Coal" min_level="0">
          <base_time>2000</base_time>
          <base_xp>5</base_xp>
          <unit_price>1</unit_price>
        </mineral>
        <mineral id="2" name="Copper" min_level="15">
          <base_time>3000</base_time>
          <base_xp>10</base_xp>
          <unit_price>2</unit_price>
        </mineral>
        <mineral id="3" name="Iron" min_level="30">
          <base_time>4000</base_time>
          <base_xp>15</base_xp>
          <unit_price>3</unit_price>
        </mineral>
        <mineral id="4" name="Silver" min_level="45">
          <base_time>5000</base_time>
          <base_xp>20</base_xp>
          <unit_price>4</unit_price>
        </mineral>
        <mineral id="5" name="Gold" min_level="60">
          <base_time>6000</base_time>
          <base_xp>25</base_xp>
          <unit_price>5</unit_price>
        </mineral>
        <mineral id="6" name="Mithril" min_level="75">
          <base_time>10000</base_time>
          <base_xp>30</base_xp>
          <unit_price>6</unit_price>
        </mineral>
        <mineral id="7" name="Adamantium" min_level="90">
          <base_time>15000</base_time>
          <base_xp>50</base_xp>
          <unit_price>10</unit_price>
        </mineral>
      </mineral_types>
    </resource_types>

    <gathering_mechanics>
      <time_reduction>
      <formula>final_time = base_time - (base_time * (player_level * 0.5%) / 100)</formula>
      <properties>
        - 0.5% reduction per player level
        - Maximum 49.5% reduction at level 99
      </properties>
      </time_reduction>
    </gathering_mechanics>

  </game_mechanics>

  <game_flow>
    <initialization>
      <step>1. **Always start with CHECK_NFT.** Verify NFT existence before any action.</step>
      <step>2. If no NFT is found:
        - Mint new NFT using MINT_NFT.
        - Verify the minting success with CHECK_NFT and then proceed.</step>
      <step>3. Check current mining status (CHECK_MINING):
        - If mining is in progress, harvest resources (HARVEST_RCS).
        - If not, proceed to the main loop.</step>
      <step>4. Query current XP to determine the starting point.</step>
      <step>5. Proceed to the main loop.</step>
    </initialization>
    
    <main_loop>
      <step>1. Check current XP levels and calculate:
        - Current level from XP.
        - XP needed for the next level.
        - Available resource tiers.</step>
      <step>2. Check mining status (CHECK_MINING):
        - If mining: Harvest current resource (HARVEST_RCS).
        - If not: Select optimal resource based on the level and start mining (MINE_RCS).</step>
      <step>3. Wait for gathering duration based on base time and level reduction bonus.</step>
      <step>4. Return to step 1 of the main loop.</step>
    </main_loop>
    
    <optimization_notes>
      - Keep mining active at all times.
      - Always choose the highest tier resource available based on your level.
      - Factor in gathering time reduction from level bonuses.
      - Balance between XP gains and gathering time.
    </optimization_notes>
  </game_flow>
</zidle_context>